<!DOCTYPE HTML>
<!--
	Story by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
	<head>
		<title>Moonlit Data</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<link rel="stylesheet" href="assets/css/main.css" />
		<noscript><link rel="stylesheet" href="assets/css/noscript.css" /></noscript>
	</head>
	<body class="is-preload">

		<!-- Wrapper -->
			<div id="wrapper" class="divided">

				<!-- One -->
					<section class="banner style1 orient-left content-align-left image-position-right fullscreen onload-image-fade-in onload-content-fade-right">
						<div class="content">
							<h1>Spotify Connect</h1>
							<p class="major">A responsive one-page site for playing Spotify music.</p>
							<p class="major" id="p1">Current song</p>
							<ul class="actions stacked">
								<li><button  id="tglBtn" class="button big wide smooth-scroll-middle">PLAY</button></li>
							</ul>
						</div>
						<div class="image">
							<img src="images/banner.jpg" alt="" />
						</div>
					</section>

				
				<!-- Footer -->
					<footer class="wrapper style1 align-center">
						<div class="inner">
							<ul class="icons">
								<li><a href="https://twitter.com/Hpatrik44" class="icon brands style2 fa-twitter"><span class="label">Twitter</span></a></li>
								<!--<li><a href="#" class="icon brands style2 fa-facebook-f"><span class="label">Facebook</span></a></li>
								<li><a href="#" class="icon brands style2 fa-instagram"><span class="label">Instagram</span></a></li>
								<li><a href="#" class="icon brands style2 fa-linkedin-in"><span class="label">LinkedIn</span></a></li>
								<li><a href="#" class="icon style2 fa-envelope"><span class="label">Email</span></a></li>-->
							</ul>
							<p>&copy; Patrik Horvat. Design: <a href="https://html5up.net">HTML5 UP</a>.</p>
						</div>
					</footer>

			</div>

		<!-- Scripts -->
			<script src="assets/js/jquery.min.js"></script>
			<script src="assets/js/jquery.scrollex.min.js"></script>
			<script src="assets/js/jquery.scrolly.min.js"></script>
			<script src="assets/js/browser.min.js"></script>
			<script src="assets/js/breakpoints.min.js"></script>
			<script src="assets/js/util.js"></script>
			<script src="assets/js/main.js"></script>
			<script src="https://sdk.scdn.co/spotify-player.js"></script>
			<script>
		window.onSpotifyWebPlaybackSDKReady = () => {
		  // You can now initialize Spotify.Player and use the SDK
		  var player = new Spotify.Player({
  name: 'Moonlit Data Player',
  getOAuthToken: callback => {
    // Run code to get a fresh access token

    callback('BQCfRABF7MdODK9tw_NNiqhGRgcyYzfWCUKMlvHreupzw38fYFbuEPcYalkjmxLe0mlN_2qlpcwzn0810pXoNzAI1VCNgMkoUPEn_DsdGHVut4cyjzMjKlwhq4pBnY2hVA833NwXld5UiggHMHBgeCvh0RFsIYuW1AZ6yKCSmpnRsDRU_mlCGAY');
  },
  volume: 0.5
});


player.connect().then(success => {
  if (success) {
    console.log('The Web Playback SDK successfully connected to Spotify!');
  }
})


















  

player.getCurrentState().then(state => {
  if (!state) {
    console.log('User is not playing music through the Web Playback SDK');
    return;
  }

  let {
    current_track,
    next_tracks: [next_track]
  } = state.track_window;

  console.log('Currently Playing', current_track);
  console.log('Playing Next', next_track);

  

});

player.addListener('player_state_changed', ({
  position,
  duration,
  track_window: { current_track }
}) => {
  console.log('Currently Playing', current_track);
  console.log('Position in Song', position);
  console.log('Duration of Song', duration);
  document.getElementById("p1").innerHTML = "Currently playing: "+current_track.name;
});


document.getElementById("tglBtn").addEventListener("click", toggleIt);

var btnStatus = 1;
function toggleIt() {
player.togglePlay().then(() => {
  console.log('Toggled playback!');
});
if(btnStatus==1){
document.getElementById("tglBtn").innerHTML ="STOP";	
btnStatus=2
}
else{
	btnStatus=1;
	document.getElementById("tglBtn").innerHTML ="PLAY";	
}


 
}





		};




		</script>



 
	</body>
</html>